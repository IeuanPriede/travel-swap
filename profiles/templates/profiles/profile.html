{% extends "base.html" %}
{% load image_extras %}

{% block content %}
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %}
{% endif %}
    {% if profile.house_images.all %}
        {% with profile.house_images.all|get_main_image as hero %}
            {% if hero %}
                <img src="{{ hero.image.url }}" class="img-fluid hero-img" alt="Main House Image">
            {% endif %}
        {% endwith %}
    {% endif %}
    <h2>Your Profile</h2>
    <p>Username: {{ profile.user.username }}</p>
    <p>Email: {{ profile.user.email }}</p>
    <p>Bio: {{ profile.bio }}</p>
    <p>Location: {{ profile.location }}</p>
    <ul>
        {% if profile.pets_allowed %}<li>Pets Allowed</li>{% endif %}
        {% if profile.has_pool %}<li>Pool</li>{% endif %}
        {% if profile.more_than_3_bedrooms %}<li>3+ Bedrooms</li>{% endif %}
        {% if profile.near_beach %}<li>Beach Nearby</li>{% endif %}
        {% if profile.in_mountains %}<li>Mountain Area</li>{% endif %}
        {% if profile.in_city %}<li>City</li>{% endif %}
        {% if profile.in_rural %}<li>Rural</li>{% endif %}
    </ul>
  
    <h3 class="mt-4">House Images</h3>
    <div class="row">
        {% for image in house_images %}
            {% if image.image %}
                <div class="col-md-4 mb-3">
                    <img src="{{ image.image.url }}" class="img-fluid rounded shadow" alt="House Image">
                </div>
            {% else %}
                <p>No image available for this entry.</p>
            {% endif %}
        {% empty %}
            <p>No images uploaded yet.</p>
        {% endfor %}
    </div>
  
  <!-- Edit profile button -->
  <a href="{% url 'edit_profile' %}" class="btn btn-primary">Edit Profile</a>
{% endblock %}
